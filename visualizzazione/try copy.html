<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Add styles for the sidebar */
    #sidebar {
      width: 250px;
      height: 100%;
      position: fixed;
      top: 0;
      left: -250px;
      background-color: #111;
      padding-top: 20px;
      color: white;
      transition: 0.5s;
    }

    /* Add styles for the content */
    #main {
      transition: margin-left 0.5s;
      padding: 16px;
    }
    tei-persName {
      display: block;
      cursor: pointer; /* Add cursor style to indicate clickable element */
    }
  </style>
</head>
<body>
  <tei-xenodata>
    <tei-rdf:Description tei:ref='GdaMontefeltro' rdf:about='http://www.wikidata.org/entity/Q969797'>
      <tei-rdf:type rdf:resource="http://xmlns.com/foaf/0.1/Person"/>
      <tei-rdfs:label xml:lang="it">Guidobaldo da Montefeltro</tei-rdfs:label>
      <tei-crm:P61_has_gender>maschio</tei-crm:P61_has_gender>
      <tei-schema:birthDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">1472-01-26T00:00:00Z</tei-schema:birthDate>
      <tei-schema:deathDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">1508-04-20T00:00:00Z</tei-schema:deathDate>
      <tei-schema:birthPlace rdf:resource="http://www.wikidata.org/entity/Q20458">Gubbio</tei-schema:birthPlace>
      <tei-schema:deathPlace rdf:resource="http://www.wikidata.org/entity/Q190646">Fossombrone</tei-schema:deathPlace>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q273108">capitano di ventura</tei-schema:hasOccupation>
    </tei-rdf:Description>
    <tei-rdf:Description tei:ref='LPacioli' rdf:about='http://www.wikidata.org/entity/Q87620'>
      <tei-rdf:type rdf:resource="http://xmlns.com/foaf/0.1/Person"/>
      <tei-rdfs:label xml:lang="it">Luca Pacioli</tei-rdfs:label>
      <tei-crm:P61_has_gender>maschio</tei-crm:P61_has_gender>
      <tei-schema:birthDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">1440-01-01T00:00:00Z</tei-schema:birthDate>
      <tei-schema:deathDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">1517-01-01T00:00:00Z</tei-schema:deathDate>
      <tei-schema:birthPlace rdf:resource="http://www.wikidata.org/entity/Q52098">Sansepolcro</tei-schema:birthPlace>
      <tei-schema:deathPlace rdf:resource="http://www.wikidata.org/entity/Q52098">Sansepolcro</tei-schema:deathPlace>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q1622272">professore universitario</tei-schema:hasOccupation>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q326653">contabile</tei-schema:hasOccupation>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q831474">presbitero</tei-schema:hasOccupation>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q548320">frate</tei-schema:hasOccupation>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q188094">economista</schema:hasOccupation>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q205375">inventore</schema:hasOccupation>
      <tei-schema:hasOccupation rdf:resource="http://www.wikidata.org/entity/Q170790">matematico</schema:hasOccupation>
    </tei-rdf:Description>
  </tei-xenodata>

  <!-- Sidebar -->
  <div id="sidebar">
    <button onclick="toggleSidebar()">Close Sidebar</button>
    <!-- Add content for the sidebar here -->
    <div id="sidebarContent"></div>
  </div>

  <!-- Page content -->
  <div id="main">
    <!-- Example elements with the class persName -->
    <tei-persName ref="GdaMontefeltro">Guidobaldo da Montefeltro</tei-persName>
    <tei-persName ref="LPacioli">Luca Pacioli</tei-persName>
  </div>

  <script>
    // Function to toggle the sidebar
    function toggleSidebar(event) {
      var sidebar = document.getElementById("sidebar");
      var main = document.getElementById("main");
      var sidebarContent = document.getElementById('sidebarContent');

      if (sidebar.style.left === "0px") {
        // If the sidebar is open, close it
        sidebar.style.left = "-250px";
        main.style.marginLeft = "0";
        sidebarContent.textContent = ''; // Clear the sidebar content
      } else {
        // If the sidebar is closed, open it
        var refValue = (event && event.target.getAttribute('ref')) || '';
        var descriptionElement = document.querySelector('tei-rdf\\:Description[tei\\:ref="' + refValue + '"]');

        // Check if the element is found
        if (descriptionElement) {
          // Get the content of the tei-rdfs:label element
          var labelContent = descriptionElement.querySelector('tei-rdfs\\:label').textContent;
          var birthDateContent = descriptionElement.querySelector('tei-schema\\:birthDate').textContent;
          var deathDateContent = descriptionElement.querySelector('tei-schema\\:deathDate').textContent;

          //correct birth date
          let birthDate = new Date(birthDateContent);

          let birthday = birthDate.getDate().toString().padStart(2, '0');
          let birhtmonth = (birthDate.getMonth() + 1).toString().padStart(2, '0'); // Month is zero-based
          let birthyear = birthDate.getFullYear().toString();

          let formattedBirthDate;

          // if (birthday === '01' && birhtmonth === '01') {
          //   formattedBirthDate = birthyear;
          // } else {
          //   formattedBirthDate = `${birthday} ${birthmonth} ${birthyear}`;
          // }


          //correct death date

          let deathDate = new Date(deathDateContent);

          let deathday = deathDate.getDate().toString().padStart(2, '0');
          let deathmonth = (deathDate.getMonth() + 1).toString().padStart(2, '0'); // Month is zero-based
          let deathyear = deathDate.getFullYear().toString();

          let formattedDeathDate;

          // if (deathday === '01' && deathmonth === '01') {
          //   formattedDeathDate = deathyear;
          // } else {
          //   formattedDeathDate = `${deathday} ${deathmonth} ${deathyear}`;
          // }


          // Display the content in the sidebar
          sidebarContent.textContent += 'name: ' + labelContent + " ";
          sidebarContent.textContent += 'birth date: ' + formattedBirthDate ;
          sidebarContent.textContent += 'death date: ' + formattedDeathDate;

        }

        sidebar.style.left = "0";
        main.style.marginLeft = "250px";
      }
    }

    // Attach the toggleSidebar function to the click event for all elements with the class tei-persName
    var persNameElements = document.querySelectorAll('tei-persName');
    for (var i = 0; i < persNameElements.length; i++) {
      persNameElements[i].addEventListener('click', toggleSidebar);
    }

    // // Attach the toggleSidebar function to the click event for the sidebar to close it
    // var sidebarElement = document.getElementById('sidebar');
    // sidebarElement.addEventListener('click', function () {
    //   toggleSidebar();
    // });
  </script>
</body>
</html>
